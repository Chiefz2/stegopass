<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StegoPass v3.0 - Cofre Digital</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <button class="help-btn" onclick="openModal()" aria-label="Abrir manual de instruÃ§Ãµes e explicaÃ§Ã£o sobre o sistema">?</button>

    <div id="welcomeModal" class="modal-overlay" role="dialog" aria-labelledby="modalTitle">
        <div class="modal-content" style="max-width: 650px;"> <button class="close-modal" onclick="closeModal()" aria-label="Fechar janela">Ã—</button>
            
            <h2 id="modalTitle" class="modal-title" style="border-bottom: 1px solid #333; padding-bottom: 10px;">ğŸ” Entendendo o StegoPass</h2>
            
            <div class="modal-body" style="max-height: 400px; overflow-y: auto; padding-right: 10px;">
                
                <div style="margin-bottom: 20px;">
                    <h3 style="color: #00ff88; margin-bottom: 5px;">O que Ã© isso?</h3>
                    <p>O <strong>StegoPass</strong> Ã© uma ferramenta de seguranÃ§a que transforma imagens comuns em cofres digitais. Diferente de um cofre normal que todo mundo vÃª que estÃ¡ trancado, este utiliza uma tÃ©cnica chamada <strong>Esteganografia</strong> para esconder que existe um segredo ali.</p>
                </div>

                <div style="margin-bottom: 20px; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px;">
                    <h3 style="color: #00ff88; margin-bottom: 5px;">Como a mÃ¡gica acontece?</h3>
                    <p>Imagine que cada ponto colorido (pixel) da sua foto Ã© um nÃºmero. O StegoPass pega a sua senha, embaralha ela usando uma chave matemÃ¡tica (o seu PIN) e guarda os pedacinhos dessa senha mudando levemente a cor dos pixels azuis da imagem.</p>
                    <p style="font-size: 0.9rem; color: #aaa; margin-top: 5px;"><em>ğŸ‘ï¸ Para o olho humano, a foto continua igual. Para o computador, ela agora carrega seus dados secretos.</em></p>
                </div>

                <div style="margin-bottom: 20px;">
                    <h3 style="color: #00ff88; margin-bottom: 5px;">ğŸ“ Como usar (Passo a Passo)</h3>
                    <ol style="line-height: 1.6; margin-left: 20px;">
                        <li><strong>Escolha o Recipiente:</strong> Na aba "Guardar", arraste uma imagem <strong>PNG</strong> (tem que ser PNG para nÃ£o perder qualidade).</li>
                        <li><strong>Adicione os Segredos:</strong> Digite o nome do serviÃ§o (ex: Instagram) e a senha que quer guardar.</li>
                        <li><strong>Tranque o Cofre:</strong> Crie um <strong>PIN Mestre</strong>. Essa Ã© a chave principal. Sem ela, nem vocÃª abre o cofre depois.</li>
                        <li><strong>Baixe a Foto:</strong> O site vai gerar uma nova imagem ("vault.png"). Salve-a. Ela Ã© o seu cofre.</li>
                        <li><strong>Para Ler:</strong> VÃ¡ na aba "Recuperar", suba essa imagem que vocÃª baixou e digite o mesmo PIN.</li>
                    </ol>
                </div>

                <div>
                    <h3 style="color: #00ff88; margin-bottom: 5px;">ğŸ›¡ï¸ Ã‰ seguro?</h3>
                    <p>Sim. Todo o processo acontece <strong>no seu navegador (Offline)</strong>. Nenhuma imagem ou senha Ã© enviada para a internet. AlÃ©m disso, se alguÃ©m pegar sua foto mas nÃ£o souber o PIN, os dados sÃ£o apenas lixo matemÃ¡tico ilegÃ­vel.</p>
                </div>

            </div>
            
            <button class="modal-action-btn" onclick="closeModal()">Entendi, vamos comeÃ§ar!</button>
        </div>
    </div>

    <div class="container" role="main">
        <header class="header">
            <h1>StegoPass</h1>
            <p>Seu banco de senhas invisÃ­vel</p>
        </header>

        <nav class="tabs" role="tablist">
            <button class="tab-btn active" onclick="switchTab('encrypt')" role="tab" aria-selected="true">ğŸ”’ Guardar Senhas</button>
            <button class="tab-btn" onclick="switchTab('decrypt')" role="tab" aria-selected="false">ğŸ”“ Recuperar Senhas</button>
        </nav>

        <section id="encrypt-section" class="content-section active">
            
            <div class="upload-area" id="drop-zone-enc" aria-label="Ãrea de upload de imagem">
                <p id="upload-text-enc">Arraste ou clique para adicionar uma imagem PNG</p>
                <input type="file" id="imageInputEnc" accept="image/png" hidden>
            </div>
            
            <div id="preview-container-enc" class="preview-box" style="display: none;">
                <p style="color: #00ff88; font-weight: bold;">âœ“ Imagem carregada com sucesso!</p>
            </div>

            <div class="form-group">
                <label for="service">ServiÃ§o / Site:</label>
                <input type="text" id="service" placeholder="Ex: E-mail, Banco, Facebook">
                
                <label for="password">Senha a ser guardada:</label>
                <div class="password-row">
                    <div class="input-wrapper">
                        <input type="password" id="password" placeholder="Digite a senha aqui" 
                               oninput="checkStrength(this.value)" 
                               onkeydown="checkCapsLock(event, 'caps-warn-1')">
                        <span class="toggle-pass" onclick="toggleVisibility('password')" title="Mostrar/Ocultar Senha">ğŸ‘ï¸</span>
                    </div>
                </div>
                <div id="caps-warn-1" class="caps-warning">âš ï¸ ATENÃ‡ÃƒO: Caps Lock Ativado!</div>
                
                <div class="strength-meter"><div id="strength-bar" class="strength-bar"></div></div>
                <small id="strength-text" style="color:#aaa;">ForÃ§a da senha</small>

                <button class="action-btn secondary" onclick="addCredential()">+ Adicionar Ã  lista</button>
            </div>

            <div class="credentials-list" id="temp-list" aria-live="polite"></div>

            <div class="master-section">
                <label for="masterPinEnc">ğŸ”‘ Crie seu PIN Mestre (NÃ£o esqueÃ§a!):</label>
                <div class="input-wrapper">
                    <input type="password" id="masterPinEnc" placeholder="Digite um cÃ³digo numÃ©rico ou palavra" onkeydown="checkCapsLock(event, 'caps-warn-2')">
                    <span class="toggle-pass" onclick="toggleVisibility('masterPinEnc')" title="Mostrar/Ocultar PIN">ğŸ‘ï¸</span>
                </div>
                <div id="caps-warn-2" class="caps-warning">âš ï¸ ATENÃ‡ÃƒO: Caps Lock Ativado!</div>
                
                <button class="action-btn primary" onclick="processEncrypt()">ğŸ›¡ï¸ Gerar Foto Protegida</button>
            </div>
        </section>

        <section id="decrypt-section" class="content-section">
            <div class="upload-area" id="drop-zone-dec" aria-label="Ãrea de upload da imagem cofre">
                <p id="upload-text-dec">Arraste ou clique para adicionar a imagem do cofre</p>
                <input type="file" id="imageInputDec" accept="image/png" hidden>
            </div>
            
            <div class="master-section">
                <label for="masterPinDec">ğŸ”‘ Qual o PIN deste cofre?</label>
                <div class="input-wrapper">
                    <input type="password" id="masterPinDec" placeholder="Digite o PIN usado na criaÃ§Ã£o">
                    <span class="toggle-pass" onclick="toggleVisibility('masterPinDec')" title="Mostrar/Ocultar PIN">ğŸ‘ï¸</span>
                </div>
                <button class="action-btn primary" onclick="processDecrypt()">ğŸ”“ Revelar Minhas Senhas</button>
            </div>
            
            <div id="result-area" class="result-box" style="display: none;">
                <h3 style="color: #00ff88; margin-bottom: 10px;">Suas senhas recuperadas:</h3>
                <div id="decrypted-content"></div>
            </div>
        </section>

        <footer class="footer">
            <p>StegoPass v3.0 - Projeto de SeguranÃ§a</p>
            <button id="panic-btn" onclick="panicMode()" aria-label="BotÃ£o de PÃ¢nico: Apaga tudo e recarrega a pÃ¡gina">â˜¢ï¸ APAGAR TUDO (ESC)</button>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
